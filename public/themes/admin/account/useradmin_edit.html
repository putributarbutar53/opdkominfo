<div class="modal-header">
  <h5 class="modal-title" id="add">Perbaharui Data Administrator</h5>
  <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span class="font-weight-light" aria-hidden="true">&times;</span></button>
</div>
<div class="modal-body text-left">        
  <form id="edit_submit">

    <input type="hidden" name="action" value="update" />
    <input type="hidden" name="id" value="{$Detail.id}" />
    
    Username:<br />
    <input type="text" name="vUsername" value="{$Detail.vUsername}" class="form form-control form-50" size="40" />
    <br />

    Password:<br />
    <input type="password" name="cPassword" class="form form-control form-50" size="40" />
    <br />

    Email:<br />
    <input type="text" name="vEmail" value="{$Detail.vEmail}" class="form form-control form-50" size="40" />
    <br />

    Nama Admin:<br />
    <input type="text" name="vName" value="{$Detail.vName}" class="form form-control form-50" size="40" />
    <br />
    <div class="custom-control custom-switch">
      <input class="custom-control-input" id="loginPicker{$Detail.id}" name="isLogin" value="yes" type="checkbox"{if $Detail.isLogin == '1'} checked{/if}>
      <label class="custom-control-label" for="loginPicker{$Detail.id}">User Diizinkan Login Ke Aplikasi</label>
    </div>
    <br />

    <span id="report_edit"></span>

    <input type="submit" name="submit" value="Perbaharui Data" class="btn btn-primary" />
  </form>
</div>

  {literal}
  <script>
        var request;
      $("#edit_submit").submit(function(event){
              
          // Prevent default posting of form - put here to work in case of errors
          event.preventDefault();
          // Abort any pending request
          if (request) {
              request.abort();
          }
          // setup some local variables
          var $form = $(this);

          // Let's select and cache all the fields
          var $inputs = $form.find("input, select, button, textarea, file");

          // Serialize the data in the form
          var serializedData = $form.serialize();

          // Let's disable the inputs for the duration of the Ajax request.
          // Note: we disable elements AFTER the form data has been serialized.
          // Disabled form elements will not be serialized.
          $inputs.prop("disabled", true);

          // Fire off the request to /form.php
          request = $.ajax({
              url: "{/literal}{$admin_url}myaccount/submit{literal}",
              type: "post",
              data: serializedData
          });

          // Callback handler that will be called on success
          request.done(function (response, textStatus, jqXHR){
              // Log a message to the console
              console.log("Hooray, it worked!");
              var obj = jQuery.parseJSON(response);
              //alert(response);
              if (obj.status=='success')
              {
                $('#report_all').html(obj.message);
                $('#edit').modal('hide');
                $('#edit_submit input[type="text"]').val('');
                $('#edit_submit textarea').val('');
              }
              else
                $('#report_edit').html(obj.message);
          });

          // Callback handler that will be called on failure
          request.fail(function (jqXHR, textStatus, errorThrown){
              // Log the error to the console
              console.error(
                  "The following error occurred: "+
                  textStatus, errorThrown
              );
              $('#report_edit').html('Connection Failed');
          });

          // Callback handler that will be called regardless
          // if the request failed or succeeded
          request.always(function () {
              // Reenable the inputs
              $inputs.prop("disabled", false);
          });

      });

      $('#edit').on('hidden.bs.modal', function () {
          dataindex();
          $('#report_edit').html('');
      });  
  </script>
  {/literal}